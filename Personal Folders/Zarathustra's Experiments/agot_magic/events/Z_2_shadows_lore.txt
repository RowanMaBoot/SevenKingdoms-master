#boost opinion spell
#add favour spell
#torment/drive mad
#shroud in shaddows/boost plot


namespace = shadows_lore




#Drain Magic



character_event = {
	id = shadows_lore.101#Soul Quench 1"
	desc = shadows_lore.101#"Your power consumes the life of your chosen target "
	is_triggered_only = yes
	picture = GFX_evt_mage_lore_shadow
	immediate = {
		event_target:magic_caster = {
			location = {
				save_event_target_as = spellloc
			}
		}
	}

	option = {
		name = shadows_lore.101a#No
		character_event = { id = z_spell_menu.99996}
		event_target:magic_caster = {
			set_variable = { which = zdmg value = 3 }
			set_variable = { which = zmoraledmg value = 25 }		
			change_variable = { which = zdmg which = caster_level }
			change_variable = { which = zmoraledmg which = caster_level }			
			
		}
		any_character = {
			limit = {
				war_with = root
				any_army = {
					location = { province = event_target:spellloc }
				}
			}
			random_army = {
				limit = {
					location = { province = event_target:spellloc }
				}
				leader = { 
					magic_points_setup = yes
					save_event_target_as = spelltarget
					magic_resist_test = yes
				}
				if = { 
					limit = { 
						event_target:magic_caster = { 
							has_character_flag = resisted
						}
					}
					event_target:magic_caster = {
						clr_character_flag = resisted
						divide_variable = { which = zdmg value = 2 }
						divide_variable = { which = zmoraledmg value = 2 }	
					}
				}			
				magic_dmg_effect = yes
				morale_dmg_effect = yes
			}
		}
	}
}





character_event = {
	id = shadows_lore.201#Soul Quench 1"
	desc = shadows_lore.201#"Your power consumes the life of your chosen target "
	is_triggered_only = yes
	picture = GFX_evt_mage_lore_shadow


	option = {
		name = shadows_lore.201a#No
		character_event = { id = z_spell_menu.99996}
		event_target:magic_caster = {
			combat = { 
				if = { 
					set_flank_tactic = lore_of_shadows_shadow_steed_melee
				}
			}
		}
	}
	option = {
		name = shadows_lore.201b#No
		character_event = { id = z_spell_menu.99996}
		event_target:magic_caster = {
			combat = { 
				if = { 
					set_flank_tactic = lore_of_shadows_shadow_steed_skirmish
				}
			}
		}		
	}

}



character_event = {
	id = shadows_lore.301#Apotheosis 1"
	desc = shadows_lore.301_desc#"Your spell restores those close to death or those freshly dead"
	is_triggered_only = yes
	picture = GFX_evt_mage_lore_shadow
	immediate = {
	}
	option = {
		name = shadows_lore.301a#Cast Another Spell ?
		event_target:magic_caster = {
			combat = { 
				if = { 
					limit = { 
						flank_has_tactic = lore_of_shadows_occams_tactic_1
					}
					set_flank_tactic = lore_of_shadows_occams_tactic_2
				}
				if = { 
					limit = { 
						flank_has_tactic = lore_of_shadows_occams_tactic
					}
					set_flank_tactic = lore_of_shadows_occams_tactic_1
				}
				if = { 
					limit = { 
						nor = { 
							flank_has_tactic = lore_of_shadows_occams_tactic
							flank_has_tactic = lore_of_shadows_occams_tactic_1
							flank_has_tactic = lore_of_shadows_occams_tactic_2
						}
					}
					set_flank_tactic = lore_of_shadows_occams_tactic
				}
			}
		}
		character_event = { id = z_spell_menu.99996}
	}
}



character_event = {
	id = shadows_lore.401#Soul Quench 1"
	desc = shadows_lore.401#"Your power consumes the life of your chosen target "
	is_triggered_only = yes
	picture = GFX_evt_mage_lore_shadow

	option = {
		name = high_magic_lore.401a#Cast Another Spell ?
		character_event = { id = z_spell_menu.99996}
		character_event = {id = shadows_lore.402}
	}

}

character_event = {
	id = shadows_lore.402#Firey_convocation event 1"
	#desc = heavens_lore.402_desc#"Your power consumes the life of your chosen target "
	is_triggered_only = yes
	hide_window = yes
	#picture = GFX_evt_mage_lore_heavens
	option = {
		event_target:magic_caster = {
			set_variable = { which = zdmg value = 10 }
			set_variable = { which = zmoraledmg value = 75 }		
			change_variable = { which = zdmg which = caster_level }
			change_variable = { which = zmoraledmg which = caster_level }	
		}
		any_character = {
			limit = {
				war_with = root
				any_army = {
					location = { province = event_target:spellloc }
				}
			}
			random_army = {
				limit = {
					location = { province = event_target:spellloc }
				}
				leader = { 
					magic_points_setup = yes
					save_event_target_as = spelltarget
					magic_resist_test = yes
				}					
				if = { 
					limit = { 
						event_target:magic_caster = { 
							has_character_flag = resisted
						}
					}
					event_target:magic_caster = {
						clr_character_flag = resisted
						divide_variable = { which = zdmg value = 2 }
						divide_variable = { which = zmoraledmg value = 2 }	
					}
				}			
				magic_dmg_effect = yes
				morale_dmg_effect = yes
			}
		}
		any_character = {
			limit = {
				war_with = root
				any_army = {
					location = { event_target:spellloc = { any_neighbor_province = { province = prev } } }
				}
			}
			random_army = {
				limit = {
					location = { event_target:spellloc = { any_neighbor_province = { province = prev } } }
				}
				leader = { 
					magic_points_setup = yes
					save_event_target_as = spelltarget
					magic_resist_test = yes
				}					
				if = { 
					limit = { 
						event_target:magic_caster = { 
							has_character_flag = resisted
						}
					}
					event_target:magic_caster = {
						clr_character_flag = resisted
						divide_variable = { which = zdmg value = 2 }
						divide_variable = { which = zmoraledmg value = 2 }	
					}
				}			
				magic_dmg_effect = yes
				morale_dmg_effect = yes
			}
		}
	}
}


#Spells
#spell 1,Mental Influence
#spell 2,Mental Influence Negative
#spell 3, Mind Control 
#Spell 4, Reveal plots
#Spell 4, Shadow Assassination


namespace = shadows_lore_non_battle




#Drain Magic

character_event = {
	id = shadows_lore_non_battle.101#Apotheosis 1"
	desc = shadows_lore_non_battle.101_desc#"Your spell restores those close to death or those freshly dead"
	is_triggered_only = yes
	picture = GFX_evt_mage_lore_shadows
	immediate = {
		event_target:magic_caster = {
			set_character_flag = positiveinfluence@ROOT
		}
	}
	option = {
		name = shadows_lore_non_battle.101a#My Court
		event_target:magic_caster = {
			set_character_flag = myperspective@ROOT
		}
		save_event_target_as = influence_perspective
		character_event = { id = shadows_lore_non_battle.102 }	
	}
	option = {
		name = shadows_lore_non_battle.101b#Thier COurt
		event_target:magic_caster = {
			set_character_flag = theirperspective@ROOT
		}
		event_target:spelltarget = {
			save_event_target_as = influence_perspective
		}
		character_event = { id = shadows_lore_non_battle.102 }		
	}
}


character_event = { 
	id = shadows_lore_non_battle.102
	title = shadows_lore_non_battle.102
	desc = { 
		trigger = { 
			event_target:magic_caster = {
				has_character_flag = positiveinfluence@ROOT
			}
		}
		text = shadows_lore_non_battle_mindinfluence.1_desc 
	}
	desc = { 
		trigger = { 
			event_target:magic_caster = {
				has_character_flag = negativeinfluence@ROOT
			}
		}
		text = shadows_lore_non_battle_mindinfluence.2_desc 
	}
	desc = { 
		trigger = { 
			event_target:magic_caster = {
				has_character_flag = mindcontrol@ROOT
			}
		}
		text = shadows_lore_non_battle_mindinfluence.3_desc 
	}			
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = { 
		any_character = { 
			limit = { 
				has_character_flag = prevtarget_@ROOT
			}
			clr_character_flag = prevtarget_@ROOT
		}
		event_target:influence_perspective = { 	
			ROOT = {
				save_event_target_as = target_1
			}
			liege = {			
				save_event_target_as = target_2
			}
		}
	}
	option = {
		name = shadows_lore_non_battle.102a#Me
		trigger = {
			event_target:magic_caster = { 
				has_character_flag = myperspective@ROOT
			}
		}
		save_event_target_as = spell_subject
		z_influence_option = yes						
	}
	option = {
		name = shadows_lore_non_battle.102b#Me
		trigger = {
			event_target:magic_caster = { 
				has_character_flag = theirperspective@ROOT
			}
		}
		event_target:spelltarget = { 
			liege = {
				save_event_target_as = spell_subject 
			}	
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes						
	}			
	option = {
		name = shadows_lore_non_battle.102c#Courtier
		trigger = {
			event_target:influence_perspective = {
				or = {
					any_friend = { 
						not = { 
							has_character_flag = prevtarget_@ROOT
						}
						character = yes
					}
					any_lover = { 
						not = { 
							has_character_flag = prevtarget_@ROOT
						}
						character = yes
					}
					any_rival = { 
						not = { 
							has_character_flag = prevtarget_@ROOT
						}
						character = yes
					}								
				}
			}
		}

		character_event = { id = shadows_lore_non_battle.103  }
	}
	option = {
		name = shadows_lore_non_battle.102d#council
		trigger = {
			event_target:influence_perspective = {
				or = {
					any_voter = { 	
						not = { 
							has_character_flag = prevtarget_@ROOT
						}
						character = yes
					}
					any_courtier = { 
						not = { 
							has_character_flag = prevtarget_@ROOT
						}
						character = yes
					}
					any_vassal = { 
						not = { 
							has_character_flag = prevtarget_@ROOT
						}
						character = yes
					}								
				}
			}
		}
		character_event = { id = shadows_lore_non_battle.107}
	}	
	option = {
		name = shadows_lore_non_battle.102e#FAMILY
		trigger = {
			event_target:influence_perspective = {
				OR = {
					any_spouse = { 
						not = { 
							has_character_flag = prevtarget_@ROOT
						}
						character = yes
					}
					any_dynasty_member = { 
						not = { 
							has_character_flag = prevtarget_@ROOT
						}
						character = yes
					}
					any_friend = { 
						not = { 
							has_character_flag = prevtarget_@ROOT
						}
						character = yes
					}											
				}	
			}
		}
		character_event = { id = shadows_lore_non_battle.111}		
	}				
}
character_event = { 
	id = shadows_lore_non_battle.103
	title = shadows_lore_non_battle.103
	desc = shadows_lore_non_battle.103_desc
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = { 
		any_character = { 
			limit = { 
				has_character_flag = prevtarget_@ROOT
			}
			clr_character_flag = prevtarget_@ROOT
		}
	}
	option = {
		name = shadows_lore_non_battle.103a#Courtier
		trigger = {
			event_target:influence_perspective = {
			any_lover = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				character = yes
			}
		}
		}		
		character_event = { id = shadows_lore_non_battle.104  }
	}		
	option = {
		name = shadows_lore_non_battle.103b#Courtier
		trigger = {
			event_target:influence_perspective = {
			any_friend = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				character = yes
			}
			}
		}

		character_event = { id = shadows_lore_non_battle.105  }
	}
	option = {
		name = shadows_lore_non_battle.103c#council
		trigger = {
			event_target:influence_perspective = {
			any_rival = { 	
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				character = yes
			}
		}
	}
		character_event = { id = shadows_lore_non_battle.106}
	}	
	option = {
		name = shadows_lore_non_battle.103d#FAMILY
		character_event = { id = shadows_lore_non_battle.102}		
	}				
}

character_event = { 
	id = shadows_lore_non_battle.104
	title = shadows_lore_non_battle.104
	desc = shadows_lore_non_battle.104_desc
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = {
	event_target:influence_perspective = { 
		random_lover = { 		
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_1
			set_character_flag = prevtarget_@ROOT
		}
		random_lover = { 			
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				
			}		
			save_event_target_as = target_2
			set_character_flag = prevtarget_@ROOT
		}
		random_lover = { 		
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_3
			set_character_flag = prevtarget_@ROOT
		}
		}
	}
	option = {
		name = shadows_lore_non_battle.104a#target_vassals
		trigger = {
		event_target:influence_perspective = { 
			any_lover = { 
				character = event_target:target_1
			}
		}
		}		
		event_target:target_1 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.104b#target_vassals
		trigger = {
		event_target:influence_perspective = { 
			any_lover = { 
				character = event_target:target_2
			}
		}
		}		
		event_target:target_2 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes		
	}
	option = {
		name = shadows_lore_non_battle.104c#target_vassals
		trigger = {
		event_target:influence_perspective = { 
			any_lover = { 
				character = event_target:target_3
			}
		}
	}
		event_target:target_3 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.104d#target_vassals
		trigger = {
			event_target:influence_perspective = { 
				any_lover = { 
					not = { 
						has_character_flag = prevtarget_@ROOT
					}
				} 		
			}
		}
		character_event = { id = shadows_lore_non_battle.103 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}	
	option = {
		name = shadows_lore_non_battle.104e#target_vassals
		character_event = { id = shadows_lore_non_battle.102}
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}		

}

character_event = { 
	id = shadows_lore_non_battle.105
	title = shadows_lore_non_battle.105
	desc = shadows_lore_non_battle.105_desc
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = {
	event_target:influence_perspective = { 
		random_friend = { 		
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_1
			set_character_flag = prevtarget_@ROOT
		}
		random_friend = { 			
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				
			}		
			save_event_target_as = target_2
			set_character_flag = prevtarget_@ROOT
		}
		random_friend = { 		
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_3
			set_character_flag = prevtarget_@ROOT
		}
		}
	}
	option = {
		name = shadows_lore_non_battle.105a#target_vassals
		trigger = { 
			event_target:influence_perspective = {
			any_friend = { 
				character = event_target:target_1
			}
			}
		}		
		event_target:target_1 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.105b#target_vassals
		trigger = { 
			event_target:influence_perspective = {
			any_friend = { 
				character = event_target:target_2
			}
		}
		}		
		event_target:target_2 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes		
	}
	option = {
		name = shadows_lore_non_battle.105c#target_vassals
		trigger = {
			event_target:influence_perspective = { 
			any_friend = { 
				character = event_target:target_3
			}
		}
		}
		event_target:target_3 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.105d#target_vassals
		trigger = {
		event_target:influence_perspective = { 
			any_friend = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}
			} 		
		}
		character_event = { id = shadows_lore_non_battle.103 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}	
	option = {
		name = shadows_lore_non_battle.105e#target_vassals
		character_event = { id = shadows_lore_non_battle.102}
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}		

}

character_event = { 
	id = shadows_lore_non_battle.106
	title = shadows_lore_non_battle.106
	desc = shadows_lore_non_battle.106_desc
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = {
	event_target:influence_perspective = { 
		random_rival = { 		
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_1
			set_character_flag = prevtarget_@ROOT
		}
		random_rival = { 			
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				
			}		
			save_event_target_as = target_2
			set_character_flag = prevtarget_@ROOT
		}
		random_rival = { 		
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_3
			set_character_flag = prevtarget_@ROOT
		}
		}
	}

	option = {
		name = shadows_lore_non_battle.106a#target_vassals
		trigger = {
		event_target:influence_perspective = { 
			any_rival = { 
				character = event_target:target_1
			}
		}
		}		
		event_target:target_1 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.111b#target_vassals
		trigger = {
		event_target:influence_perspective = { 
			any_rival = { 
				character = event_target:target_2
			}
		}
		}		
		event_target:target_2 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes	
	}
	option = {
		name = shadows_lore_non_battle.106c#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_rival = { 
				character = event_target:target_3
			}
		}
		}
		event_target:target_3 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.106d#target_vassals
		trigger = { 
			event_target:influence_perspective = {
				any_rival = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}
			} 		
		}
		character_event = { id = shadows_lore_non_battle.103 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}	
	option = {
		name = shadows_lore_non_battle.106e#target_vassals
		character_event = { id = shadows_lore_non_battle.102}
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}		

}


character_event = { 
	id = shadows_lore_non_battle.107
	title = shadows_lore_non_battle.107
	desc = shadows_lore_non_battle.107_desc
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = { 
		any_character = { 
			limit = { 
				has_character_flag = prevtarget_@ROOT
			}
			clr_character_flag = prevtarget_@ROOT
		}
	}
	option = {
		name = shadows_lore_non_battle.107a#Courtier
		trigger = {
			event_target:influence_perspective = {
			any_voter = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				character = yes
			}
		}	
		}	
		character_event = { id = shadows_lore_non_battle.108  }
	}		
	option = {
		name = shadows_lore_non_battle.107b#Courtier
		trigger = {
			event_target:influence_perspective = {
			any_vassal = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				character = yes
			}
		}
	}

		character_event = { id = shadows_lore_non_battle.109  }
	}
	option = {
		name = shadows_lore_non_battle.107c#council
		trigger = {
			event_target:influence_perspective = {
			any_courtier = { 	
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				character = yes
			}
		}
		}
		character_event = { id = shadows_lore_non_battle.110}
	}	
	option = {
		name = shadows_lore_non_battle.107d#FAMILY
		character_event = { id = shadows_lore_non_battle.102}		
	}				
}

character_event = { 
	id = shadows_lore_non_battle.108
	title = shadows_lore_non_battle.108
	desc = shadows_lore_non_battle.108_desc
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = { 
		event_target:influence_perspective = {
		random_voter = { 		
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_1
			set_character_flag = prevtarget_@ROOT
		}
		random_voter = { 			
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_2
			set_character_flag = prevtarget_@ROOT
		}
		random_voter = { 		
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_3
			set_character_flag = prevtarget_@ROOT
		}
		}
	}
	option = {
		name = shadows_lore_non_battle.108a#target_vassals
		trigger = { 
			event_target:influence_perspective = {
			any_voter = { 
				character = event_target:target_1
			}
		}
		}		
		event_target:target_1 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.112b#target_vassals
		trigger = {
		event_target:influence_perspective = { 
			any_voter = { 
				character = event_target:target_2
			}
		}		
	}
		event_target:target_2 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes	
	}
	option = {
		name = shadows_lore_non_battle.108c#target_vassals
		trigger = { 
			event_target:influence_perspective = {
			any_voter = { 
				character = event_target:target_3
			}
		}
	}
		event_target:target_3 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.108d#target_vassals
		trigger = { 
			event_target:influence_perspective = {
			any_voter = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				
			} 
			}		
		}
		character_event = { id = shadows_lore_non_battle.104 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}	
	option = {
		name = shadows_lore_non_battle.108e#target_vassals
		character_event = { id = shadows_lore_non_battle.102 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}

}

character_event = { 
	id = shadows_lore_non_battle.109
	title = shadows_lore_non_battle.109
	desc = shadows_lore_non_battle.109_desc
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = {
	event_target:influence_perspective = { 
		random_vassal = { 		
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_1
			set_character_flag = prevtarget_@ROOT
		}
		random_vassal = { 			
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				
			}		
			save_event_target_as = target_2
			set_character_flag = prevtarget_@ROOT
		}
		random_vassal = { 		
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_3
			set_character_flag = prevtarget_@ROOT
		}
		}
	}
	option = {
		name = shadows_lore_non_battle.109a#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_vassal = { 
				character = event_target:target_1
			}
		}
		}		
		event_target:target_1 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.109b#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_vassal = { 
				character = event_target:target_2
			}
		}
		}		
		event_target:target_2 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes	
	}
	option = {
		name = shadows_lore_non_battle.109c#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_vassal = { 
				character = event_target:target_3
			}
		}
		}
		event_target:target_3 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.109d#target_vassals
		trigger = { 
			event_target:influence_perspective = {
			any_vassal = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}
			} 		
		}
		character_event = { id = shadows_lore_non_battle.103 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}	
	option = {
		name = shadows_lore_non_battle.109e#target_vassals
		character_event = { id = shadows_lore_non_battle.102}
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}		

}

character_event = { 
	id = shadows_lore_non_battle.110
	title = shadows_lore_non_battle.110
	desc = shadows_lore_non_battle.110_desc
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = {
	event_target:influence_perspective = { 
		random_courtier = { 		
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_1
			set_character_flag = prevtarget_@ROOT
		}
		random_courtier = { 			
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				
			}		
			save_event_target_as = target_2
			set_character_flag = prevtarget_@ROOT
		}
		random_courtier = { 		
			limit = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_3
			set_character_flag = prevtarget_@ROOT
		}
		}
	}
	option = {
		name = shadows_lore_non_battle.110a#target_vassals
		trigger = {
		event_target:influence_perspective = { 
			any_courtier = { 
				character = event_target:target_1
			}
		}
		}		
		event_target:target_1 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.109b#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_courtier = { 
				character = event_target:target_2
			}
		}
		}		
		event_target:target_2 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes	
	}
	option = {
		name = shadows_lore_non_battle.110c#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_courtier = { 
				character = event_target:target_3
			}
		}
		}
		event_target:target_3 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.110d#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_courtier = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			} 		
		}
		}
		character_event = { id = shadows_lore_non_battle.103 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}	
	option = {
		name = shadows_lore_non_battle.110e#target_vassals
		character_event = { id = shadows_lore_non_battle.102}
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}		

}

character_event = { 
	id = shadows_lore_non_battle.111
	title = shadows_lore_non_battle.111
	desc = shadows_lore_non_battle.111_desc
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = { 
		any_character = { 
			limit = { 
				has_character_flag = prevtarget_@ROOT
			}
			clr_character_flag = prevtarget_@ROOT
		}
	}
	option = {
		name = shadows_lore_non_battle.111a#Courtier
		trigger = {
			event_target:influence_perspective = {
			any_spouse = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				character = yes
			}
		}
		}		
		character_event = { id = shadows_lore_non_battle.112  }
	}		
	option = {
		name = shadows_lore_non_battle.111b#Courtier
		trigger = {
		event_target:influence_perspective = {
			any_dynasty_member = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				character = yes
			}
		}
		}

		character_event = { id = shadows_lore_non_battle.113  }
	}
	option = {
		name = shadows_lore_non_battle.111c#council
		trigger = {
			event_target:influence_perspective = {
			any_child = { 	
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				character = yes
			}
		}
		}
		character_event = { id = shadows_lore_non_battle.114}
	}	
	option = {
		name = shadows_lore_non_battle.111d#FAMILY
		character_event = { id = shadows_lore_non_battle.102}		
	}				
}

character_event = { 
	id = shadows_lore_non_battle.112
	title = shadows_lore_non_battle.112
	desc = shadows_lore_non_battle.112_desc
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = { 
		event_target:influence_perspective = {
		random_spouse = { 		
			limit = {
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_1
			set_character_flag = prevtarget_@ROOT
		}
		random_spouse = { 		
			limit = {
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_2
			set_character_flag = prevtarget_@ROOT
		}
		random_spouse = { 		
			limit = {
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				
			}		
			save_event_target_as = target_3
			set_character_flag = prevtarget_@ROOT
		}		
		}
	}
	option = {
		name = shadows_lore_non_battle.112a#target_vassals
		trigger = { 
			event_target:influence_perspective = {
			any_spouse = { 
				character = event_target:target_1
			}
		}
		}		
		event_target:target_1 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.112b#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_spouse = { 
				character = event_target:target_2
			}
		}
		}		
		event_target:target_2 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes	
	}
	option = {
		name = shadows_lore_non_battle.112c#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_spouse = { 
				character = event_target:target_3
			}
		}
		}
		event_target:target_3 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.112d#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_spouse = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			} 		
		}
		}
		character_event = { id = shadows_lore_non_battle.112 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}	
	option = {
		name = shadows_lore_non_battle.112e#target_vassals
		character_event = { id = shadows_lore_non_battle.111 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}
	
}

character_event = { 
	id = shadows_lore_non_battle.113
	title = shadows_lore_non_battle.113
	desc = shadows_lore_non_battle.113_desc
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = { 
		event_target:influence_perspective = {
		random_dynasty_member = { 		
			limit = {
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_1
			set_character_flag = prevtarget_@ROOT
		}
		random_dynasty_member = { 		
			limit = {
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_2
			set_character_flag = prevtarget_@ROOT
		}
		random_dynasty_member = { 		
			limit = {
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
 
			}		
			save_event_target_as = target_3
			set_character_flag = prevtarget_@ROOT
		}		
		}
	}
	option = {
		name = shadows_lore_non_battle.113a#target_vassals
		trigger = { 
			event_target:influence_perspective = {
				any_dynasty_member = { 
					character = event_target:target_1
				}
			}		
		}
		event_target:target_1 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.113b#target_vassals
		trigger = { 
			event_target:influence_perspective = {
				any_dynasty_member = { 
					character = event_target:target_2
				}
			}
		}		
		event_target:target_2 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.113c#target_vassals
		trigger = { 
			event_target:influence_perspective = {
				any_dynasty_member = { 
					character = event_target:target_3
				}
			}
		}
		event_target:target_3 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.113d#target_vassals
		trigger = { 
			event_target:influence_perspective = {
			any_dynasty_member = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}
			} 		
		}
		character_event = { id = shadows_lore_non_battle.113 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}	
	option = {
		name = shadows_lore_non_battle.113e#target_vassals
		character_event = { id = shadows_lore_non_battle.111 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}
	
}

character_event = { 
	id = shadows_lore_non_battle.114
	title = shadows_lore_non_battle.114
	desc = shadows_lore_non_battle.114_desc
	picture = GFX_evt_mage_lore_shadows
	is_triggered_only = yes
	immediate = {
	event_target:influence_perspective = { 
		random_child = { 		
			limit = {
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_1
			set_character_flag = prevtarget_@ROOT
		}
		random_child = { 		
			limit = {
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			}		
			save_event_target_as = target_2
			set_character_flag = prevtarget_@ROOT
		}
		random_child = { 		
			limit = {
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
			 
			}		
			save_event_target_as = target_3
			set_character_flag = prevtarget_@ROOT
		}		
		}
	}
	option = {
		name = shadows_lore_non_battle.114a#target_vassals
		trigger = { 
			event_target:influence_perspective = {
			any_child = { 
				character = event_target:target_1
			}
		}
		}		
		event_target:target_1 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.114b#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_child = { 
				character = event_target:target_2
			}
		}
		}		
		event_target:target_2 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes		
	}
	option = {
		name = shadows_lore_non_battle.114c#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_child = { 
				character = event_target:target_3
			}
		}
		}
		event_target:target_3 = {
			save_event_target_as = spell_subject
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = positiveinfluence@ROOT
				}
			}
			z_magic_influence_positive = yes
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = negativeinfluence@ROOT
				}
			}
			z_magic_influence_negative= yes	 
			z_clr_mind_influence_modifiers = yes
		}
		if = { 
			limit = {
				event_target:magic_caster = {
					has_character_flag = mindcontrol@ROOT
				}
			}
			z_clr_mind_influence_modifiers = yes
			character_event = { id = shadows_lore_non_battle.303}	 
		}
		z_clr_mind_influence_modifiers = yes
	}
	option = {
		name = shadows_lore_non_battle.114d#target_vassals
		trigger = { 
		event_target:influence_perspective = {
			any_child = { 
				not = { 
					has_character_flag = prevtarget_@ROOT
				}
				}
			} 		
		}
		character_event = { id = shadows_lore_non_battle.114 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}	
	option = {
		name = shadows_lore_non_battle.114e#target_vassals
		character_event = { id = shadows_lore_non_battle.111 }
		clear_event_target = event_target:target_1
		clear_event_target = event_target:target_2 
		clear_event_target = event_target:target_3	
	}
	
}


character_event = {
	id = shadows_lore_non_battle.201#Apotheosis 1"
	desc = shadows_lore_non_battle.201_desc#"Your spell restores those close to death or those freshly dead"
	is_triggered_only = yes
	picture = GFX_evt_mage_lore_shadows
	immediate = {
		event_target:magic_caster = {
			set_character_flag = negativeinfluence@ROOT
		}
	}
	option = {
		name = shadows_lore_non_battle.201a#My Court
		event_target:magic_caster = {
			set_character_flag = myperspective@ROOT
		}
		save_event_target_as = influence_perspective
		character_event = { id = shadows_lore_non_battle.102 }	
	}
	option = {
		name = shadows_lore_non_battle.201b#Thier COurt
		event_target:magic_caster = {
			set_character_flag = theirperspective@ROOT
		}
		event_target:spelltarget = {
			save_event_target_as = influence_perspective
		}		
		character_event = { id = shadows_lore_non_battle.102 }		
	}
}




character_event = {
	id = shadows_lore_non_battle.301#Apotheosis 1"
	desc = shadows_lore_non_battle.301_desc#"Your spell restores those close to death or those freshly dead"
	is_triggered_only = yes
	picture = GFX_evt_mage_lore_shadows
	immediate = {
		event_target:magic_caster = {
			set_character_flag = mindcontrol@ROOT
		}
	}
	option = {
		name = shadows_lore_non_battle.301a#My Court
		event_target:magic_caster = {
			set_character_flag = myperspective@ROOT
		}
		save_event_target_as = influence_perspective
		character_event = { id = shadows_lore_non_battle.102 }	
	}
	option = {
		name = shadows_lore_non_battle.301b#Thier COurt
		event_target:magic_caster = {
			set_character_flag = theirperspective@ROOT
		}
		event_target:spelltarget = {
			save_event_target_as = influence_perspective
		}
		character_event = { id = shadows_lore_non_battle.102 }		
	}
}

character_event = {
	id = shadows_lore_non_battle.303#Drain Magic Power 1"
	desc = shadows_lore_non_battle.401_desc#"Your spell burns through the air, taking from all enemies the ability to cast. "
	is_triggered_only = yes
	picture = GFX_evt_mage_lore_shadows
	immediate = {
		character_event = { id = z_spell_menu.99998}
	}

	option = {
		name = shadows_lore_non_battle.303a#No
		event_target:spelltarget = { 
			add_favor = event_target:spell_subject
		}
	}
	option = {
		name = shadows_lore_non_battle.303b#No
		z_magic_enchant = yes
	}
	option = {
		name = shadows_lore_non_battle.303c#No
		z_magic_enslave = yes
	}		
		
}

character_event = {
	id = shadows_lore_non_battle.401#Drain Magic Power 1"
	desc = shadows_lore_non_battle.401_desc#"Your spell burns through the air, taking from all enemies the ability to cast. "
	is_triggered_only = yes
	picture = GFX_evt_mage_lore_shadows
	immediate = {
		character_event = { id = z_spell_menu.99998}
		z_magic_reveal_plots = yes
	}

	option = {
		name = shadows_lore_non_battle.303a#No
	}
		
}

character_event = {
	id = shadows_lore_non_battle.501#Drain Magic Power 1"
	desc = shadows_lore_non_battle.501_desc#"Your spell burns through the air, taking from all enemies the ability to cast. "
	is_triggered_only = yes
	picture = GFX_evt_mage_lore_shadows
	immediate = {
	}

	option = {
		name = shadows_lore_non_battle.101a#No
		add_character_modifier = { name = shadow_dagger duration = 3600}

	}
}





character_event = {
	id = shadows_lore_non_battle.701#Soul Quench 1"
	desc = shadows_lore_non_battle.701#"Your power consumes the life of your chosen target "
	is_triggered_only = yes
	picture = GFX_evt_mage_lore_shadows
	immediate = {
		character_event = { id = z_spell_menu.99998}
	}

	option = {
		name = shadows_lore_non_battle.401a#Cast Another Spell ?
		event_target:spelltarget = {
			save_event_target_as = duelist_a
			set_character_flag = duel
		}
		ROOT = {
			save_event_target_as = duelist_b
			set_character_flag = duel
			hidden_tooltip = { character_event = { id = duelengine.1 } }
			
		}
	}

}







